<Window x:Class="ToDoApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ToDoApp"
        xmlns:viewmodel="clr-namespace:ToDoApp.ViewModel"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
    <Window.DataContext>
        <viewmodel:ToDoAppViewModel x:Name="ToDoAppViewModel" />
    </Window.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <StackPanel>
            <ListBox ItemsSource="{Binding DefaultToDoLists}" Margin="0,20,0,0" Style="{StaticResource ListBoxStyle}" ItemTemplate="{StaticResource DefaultListsSidebarItemTemplate}"/>
            <Separator Margin="5,10" />
            <StackPanel Orientation="Horizontal" Height="30">
                <TextBox x:Name="AddListTextBox" Style="{StaticResource MyWaterMarkStyle}" Tag="Добавить список..." Width="160" Margin="10,0,7,0" VerticalContentAlignment="Center"/>
                <Button Content="+" Width="15" Command="{Binding AddListCommand}"
                        CommandParameter="{Binding ElementName=AddListTextBox}" />
            </StackPanel>
            </StackPanel>
            <ListBox Grid.Row="1" x:Name="ToDoListsBox" HorizontalContentAlignment="Stretch" ItemsSource="{Binding ToDoLists}" Style="{StaticResource ListBoxStyle}"  ItemTemplate="{StaticResource SidebarItemTemplate}"/>
        </Grid>

        <Grid Grid.Column="1" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <StackPanel>
                <TextBox IsReadOnly="False" Text="{Binding CurrentTask.Name}" Style="{StaticResource MyWaterMarkStyle}" Tag="Добавить задачу..." VerticalContentAlignment="Center"
                         BorderThickness="0" Margin="0,5"/>
                <StackPanel FlowDirection="RightToLeft" Orientation="Horizontal">
                    <Button x:Name="SaveTaskButton" Content="Сохранить" Margin="5,0" Visibility="{Binding IsTaskEditing, Converter={StaticResource VisibilityConverter}}" 
                            Command="{Binding SaveTaskCommand}"/>
                    <Button Content="Добавить" Margin="5,0" Command="{Binding AddTaskCommand}" 
                            Visibility="{Binding IsNotTaskEditing, Converter={StaticResource VisibilityConverter}}"/>
                    <ComboBox Margin="5,0" IsEnabled="{Binding IsRepeatComboboxEnabled}" SelectedIndex="{Binding SelectedRepeatingCondition}">
                        <ComboBoxItem Content="Не повторять" />
                        <ComboBoxItem Content="Ежедневно" />
                        <ComboBoxItem Content="Рабочие дни" />
                        <ComboBoxItem Content="Выходные" />
                        <ComboBoxItem Content="Еженедельно" />
                        <ComboBoxItem Content="Ежемесячно" />
                        <ComboBoxItem Content="Ежегодно" />
                        <Button Content="...Настроить" Command="{Binding EditRepeatTimeCommand}" />
                    </ComboBox>
                    <ComboBox Margin="5,0" SelectedIndex="{Binding SelectedPriority}">
                        <ComboBoxItem Content="Низкий" />
                        <ComboBoxItem Content="Средний" />
                        <ComboBoxItem Content="Высокий" />
                        <!--<TextBox Width="50" Text="1-10" HorizontalContentAlignment="Center" />-->
                    </ComboBox>
                    <Button Margin="5,0" Content="Время" Command="{Binding EditTimeCommand}" />
                </StackPanel>
            </StackPanel>
            <ListBox Grid.Row="1" Margin="0,10" ItemsSource="{Binding CurrentTasksList}" ItemTemplate="{StaticResource TaskTemplate}" BorderThickness="0"/>
        </Grid>

    </Grid>
</Window>